{% extends "../../example/base_side_right.html" %}
{% load static %} 
{% block plus_style %}
<link rel="stylesheet" href="{% static 'styles/page_styles/alarm_page.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/mypage_main.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/onboarding_pages/onboarding_1.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/make_friends_pages/friends_email_input.css' %}" />

<link rel="stylesheet" href="{% static 'styles/page_styles/make_friends_pages/friends_confirm.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/make_friends_pages/friended.css' %}" />
<link rel="stylesheet" href="{% static 'styles/component_styles/signup_component.css' %}" />

{% endblock plus_style %} 

{% block plus_script %}
<script>
document.addEventListener("DOMContentLoaded", function () {
  const emailInput = document.getElementById("email");
  const submitBtn = document.getElementById("friend_submitbtn");

  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  function checkInputs() {
    const email = emailInput.value.trim();

    if (email.length === 0) {
      emailInput.style.border = "2px solid white";
    } else if (!isValidEmail(email)) {
      emailInput.style.border = "2px solid rgb(240, 102, 125)";
    } else {
      emailInput.style.border = "2px solid rgb(131, 218, 129)";
    }

    submitBtn.disabled = !isValidEmail(email);
    submitBtn.style.backgroundColor = isValidEmail(email) ? "rgb(174, 129, 218)" : "white";
    submitBtn.style.color = isValidEmail(email) ? "white" : "#A48BE7";
  }

  emailInput.addEventListener("input", checkInputs);

  // 초기 상태 반영
  checkInputs();
});
</script>
{% endblock plus_script %}


{% block mainMessage %}
<b>
  <p>새로운 친구를 찾고 계신가요?</p>
  친구의 이메일을 입력해주세요
</b>
{% endblock mainMessage %}
{% block left %}
<div class="before_page">
  <a href="javascript:history.back();">
    <img src="{% static 'assets/img/left.png' %}" alt="뒤로가기" class="left_right"/>
  </a>
</div>
{% endblock left %}
{% block right %}
<div class="email_finder_hugger">
<div class="input_hugger">
<form method="post" action="{% url 'friends:create_send_friends' %}" id="friendForm">
    {% csrf_token %}
    <label for="email">이메일</label><br />
    <input type="text" id="email" name="email" placeholder="예) Fitforme@example.com" />
    <button type="submit" id="friend_submitbtn">친구 추가</button>
</form>
</div>
</div>
{% endblock right %}
