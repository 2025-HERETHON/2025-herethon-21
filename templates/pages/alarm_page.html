{% extends "../example/base_side_left.html" %}
{% load static %}

{% block plus_style %}
<link rel="stylesheet" href="{% static 'styles/page_styles/alarm_page.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/mypage_main.css' %}" />
{% endblock plus_style %}

{% block pageName %}
  알림
{% endblock pageName %}

{% block left %}
<div class="topbarhugger">
  <img src="{% static 'assets/img/icon.png' %}" alt="아이콘" class="icon_image" />
  <a href="{% url 'frontend:cyclepage' %}">
    <img src="{% static 'assets/img/to_home.png' %}" alt="홈으로" class="tohome_image" />
  </a>
</div>
<div class="pipihugger">
  <img src="{% static 'assets/img/phone_pipi.png' %}" alt="폰을 든 피피" class="phone_pipi" />
  <p class="pipi_says">어떤 알림이 왔는지 확인해 볼까요? 피피</p>
</div>
{% endblock left %}

{% block right %}
  <div class="alarmhugger">
    {% for notification in notification_list %}
      <div class="bubble left" id="bubble{{ forloop.counter }}">
        <div class="timestamp">{{ notification.created_at|timesince }} 전</div>
        <div class="content_line">
          <div class="message_text">
            {{ notification.content }}
          </div>

          {% if "(이)가 친구 요청했어요" in notification.content %}
            <div class="btns">
              <!-- 수락 폼 -->
              <form method="post" action="{% url 'friends:create_accept_friend' notification_id=notification.id %}">
                {% csrf_token %}
                <button type="submit">수락</button>
              </form>
              <!-- 거절 폼 -->
              <form method="post" action="{% url 'friends:create_reject_friend' notification_id=notification.id %}">
                {% csrf_token %}
                <button type="submit">거절</button>
              </form>
            </div>
          {% endif %}
        </div>
      </div>
    {% empty %}
      <div class="pipi_null_img">
        <img src="{% static 'assets/img/mypage_icon.png' %}" alt="알림X피피이미지" />
      </div>
    {% endfor %}
  </div>
{% endblock right %}
