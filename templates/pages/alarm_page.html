{% extends "../example/base.html" %}

{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'styles/page_styles/null.css' %}" />
<link rel="stylesheet" href="{% static 'styles/component_styles/page_component.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/alarm_page.css' %}" />
<link rel="stylesheet" href="{% static 'styles/page_styles/mypage_main.css' %}" />
{% endblock style %}

{% block script %}
{% endblock script %}

{% block body %}
<body>
  <header class="top_section">
    <section class="top_bar logohugger">
      <a href="{% url 'frontend:cyclepage' %}">
        <img src="{% static 'assets/img/logo.png' %}" alt="로고" class="logo_image" />
      </a>
      <img src="{% static 'assets/img/icon.png' %}" alt="아이콘" class="icon_image" />
      <a href="{% url 'frontend:cyclepage' %}">
        <img src="{% static 'assets/img/to_home.png' %}" alt="홈으로" class="tohome_image" />
      </a>
    </section>
  </header>

  <main class="main_layout">
    <section class="content_area">
      <section class="content_left">
        <div class="pipihugger">
          <img src="{% static 'assets/img/phone_pipi.png' %}" alt="폰을 든 피피" class="phone_pipi" />
          <p class="pipi_says">어떤 알림이 왔는지 확인해 볼까요? 피피</p>
        </div>
      </section>

      <nav class="sidebar_nav" aria-label="페이지 네비게이션">
        <p class="nav_button nav_button1">알 림</p>
        <div class="nav_line"></div>
        <div class="nav_line"></div>
      </nav>

      <section class="content_right">
        <section class="star_background">
          <span class="star star5"></span>
          <span class="star star6"></span>
          <span class="star star7"></span>
          <span class="star star8"></span>
          <span class="star star9"></span>
          <span class="star star11"></span>
          <span class="star star12"></span>
          <span class="star star13"></span>
          <span class="star star14"></span>
          <span class="star star15"></span>
          <span class="star star16"></span>
        </section>

        <div class="alarmhugger">
          {% for notification in notification_list %}
            <div class="bubble left" id="bubble{{ forloop.counter }}">
              <div class="timestamp">{{ notification.created_at|timesince }} 전</div>
              <div class="content_line">
                <div class="message_text">
                  {{ notification.content }}
                </div>
                {% if "(이)가 친구 요청했어요" in notification.content %}
                  <div class="btns">
                    <!-- 수락 폼 -->
                    <form method="post" action="{% url 'friends:create_accept_friend' notification_id=notification.id %}">
                      {% csrf_token %}
                      <button type="submit">수락</button>
                    </form>
                    <!-- 거절 폼 -->
                    <form method="post" action="{% url 'friends:create_reject_friend' notification_id=notification.id %}">
                      {% csrf_token %}
                      <button type="submit">거절</button>
                    </form>
                  </div>
                {% endif %}
              </div>
            </div>
          {% empty %}
            <div class="pipi_null_img">
              <img src="{% static 'assets/img/mypage_icon.png' %}" alt="알림X피피이미지" />
            </div>
          {% endfor %}
        </div>

      </section>
    </section>
  </main>
</body>
{% endblock body %}
